<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36" version="24.7.17">
  <diagram name="第 1 页" id="Kl5If95WH-XKrI586N-w">
    <mxGraphModel dx="3000" dy="1766" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="310" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-2" value="&lt;span style=&quot;color: rgb(184, 191, 198); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; font-size: 16px; orphans: 4; text-align: start; white-space-collapse: preserve; background-color: rgb(54, 59, 64);&quot;&gt;ShellOffsetBase&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="121" y="199" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-5" target="k5HLEc5P-Sjag6e1dIfe-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-5" target="k5HLEc5P-Sjag6e1dIfe-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-5" value="ShellMarkOpnLps" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-6" value="loopSetInOutOff" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-7" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;&quot;&gt;这个函数遍历loop中的每一个pedge，这个loop属于一个开放面，去看这些偏移是否一致，偏&lt;/font&gt;&lt;span style=&quot;background-color: initial; font-weight: normal;&quot;&gt;移inside，outside，或者unknown。具体逻辑是去找这个predeedge对应的相邻loop和相邻面。preedge-&amp;gt;edge-&amp;gt;ohterPreedge-&amp;gt;loop-&amp;gt;face.然后去查看face中的appdata的offset，和原preedge中点的法向进行比对。&lt;/span&gt;&lt;/font&gt;&lt;/h1&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="650" y="190" width="630" height="110" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-10" target="k5HLEc5P-Sjag6e1dIfe-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-10" target="k5HLEc5P-Sjag6e1dIfe-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-10" value="ShelladdOffFcs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-11" value="调用loopAddOpnFcs" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-14" target="k5HLEc5P-Sjag6e1dIfe-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-14" target="k5HLEc5P-Sjag6e1dIfe-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-14" value="ShellAddOfflps" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="525" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-17" target="k5HLEc5P-Sjag6e1dIfe-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-17" target="k5HLEc5P-Sjag6e1dIfe-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-17" value="shelladdOffEdgs：参数为loop的初始个数，强绑定上下文，利用了后创建的loop一定在后面" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="770" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-20" target="k5HLEc5P-Sjag6e1dIfe-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-20" target="k5HLEc5P-Sjag6e1dIfe-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-20" value="ShellAddVtxDat" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="990" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-21" value="ShellSetOffGeom" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="1130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-23" target="k5HLEc5P-Sjag6e1dIfe-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-23" value="loopSetOffEdge" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="1380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-25" target="k5HLEc5P-Sjag6e1dIfe-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-25" value="singleLoopSetOffEdge" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="720" y="1380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-27" target="k5HLEc5P-Sjag6e1dIfe-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-27" value="edgSetOffsetCurv" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="920" y="1380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-28" value="遍历此shell中的face中的loop，基于他们的父面标记成开放或者不开放，loop在父面中的级别和偏移方向对于开放的loop也标记出来，这会创建appdata" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="279" y="150" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-29" value="add faces to the offset shell，然后把面设置成不open，把loop都设置成open" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="200" y="360" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-30" value="&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;.他的参数最后一个是从shelladdVtxDat传过来的一个整体的一系列开放的边，对每一个loop进行单独处理，主要目的就是给lp添加appdata&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="610" y="900" width="200" height="90" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-31" value="add loop and preedges in the offset shell,//ShellAddOfflps-&amp;gt;loopAddOpenLps(在这个过程中会设置loop的face)" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="179" y="505" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-32" value="add edge and vertexs ,associate with new faces,loops and preedges" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="179" y="730" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-33" value="Add vertex data to offset shell&lt;div&gt;(add appdata for all loops of this shell),这里添加了VsShellVtxAppdata,但是应该是在后面&lt;span style=&quot;background-color: initial;&quot;&gt;修改的了&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="140" y="970" width="150" height="100" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-34" value="LoopAddVtxDat(tt,int lpindex,VsListObj* pliAdjOpenEdg" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="990" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-35" value="calculate the offset uv and 3d curves and vertexs" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="179" y="1105" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-36" value="获取基面，创建添加偏移面" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="520" y="320" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-37" value="loopAddOpenLps" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="525" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-38" value="如果loop是开放的，调用" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="440" y="490" width="91" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-39" value="创建新的loop，设置其appdata为原来base loop的appdata，绑定面，面的index再appdata中。修改baseloop中的appdata，让base loop 和offset loop交叉引用。创建preedge，基于原来的preedge。&lt;div&gt;part2：添加一个inner loop，走同样的流程，设置为offset loop的inner&lt;/div&gt;&lt;div&gt;如果不是开放的面，则正常走流程，仅仅增加偏移面，并不设置inner loop&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="640" y="460" width="300" height="100" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-40" value="loopAddOpenEdges" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="531" y="775" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-41" value="如果loop是开放的，调用" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="429" y="710" width="91" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-42" value="这个函数更新open 偏移的preedge的next，他还会添加边和顶点信息给开放的偏移loop，这个过程中构造了edge和vtx" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="530" y="700" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-43" value="参数为shl索引，遍历shell中的loop进行调用" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="429" y="920" width="91" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-44" value="递归的设置顶点所属的loop的appdata" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="930" y="900" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-46" target="k5HLEc5P-Sjag6e1dIfe-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-46" value="VtxEvalOffPnts" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="1130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-47" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-21" target="k5HLEc5P-Sjag6e1dIfe-46" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="540" y="1210" as="sourcePoint" />
            <mxPoint x="590" y="1160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-48" value="首先设置所有的顶点" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="540" y="1090" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-49" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-50" target="k5HLEc5P-Sjag6e1dIfe-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-50" value="EdgSetOpnCurv" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1120" y="1380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-51" value="ShellEdgAddOpen" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1320" y="1380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-52" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-53" target="k5HLEc5P-Sjag6e1dIfe-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-53" value="VtxAddShellEdgs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="1260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-54" value="这个例程创建新的边去连接新的顶点，当偏移曲面和基面不能相遇在一个单独的点时" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="340" y="1260" width="180" height="75" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-55" value="LoopAddVtxDat代码逻辑：&lt;div&gt;初始化VxShellVtxAppdata,如果loop存储的ShellAppdata 不是原始的，也不是开放的，继续进行&lt;/div&gt;&lt;div&gt;1 获取loop的offsetFace appdata&lt;/div&gt;&lt;div&gt;2遍历loop的所有preedge，获取edge，随后获取edge的base edge&lt;/div&gt;&lt;div&gt;3如果shell loopappdata表示他是开放的，看这base edge是否是开放的，如果是开放的的，进行adjOpnAddVtxDat处理&lt;/div&gt;&lt;div&gt;4基于base edge 和偏移preedg决定顶点顺序，顶点从offedge中取&lt;/div&gt;&lt;div&gt;5给顶点赋予VsShellVtxAppData&lt;/div&gt;&lt;div&gt;6 递归处理&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="930" y="980" width="390" height="160" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-56" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-57" target="k5HLEc5P-Sjag6e1dIfe-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-57" value="VxLIpMain" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="279" y="2200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-58" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-60" target="k5HLEc5P-Sjag6e1dIfe-62" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-59" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-60" target="k5HLEc5P-Sjag6e1dIfe-106" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-60" value="VxLipShell" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="479" y="2200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-61" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-62" target="k5HLEc5P-Sjag6e1dIfe-64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-62" value="LipOffsetChain" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="679" y="2200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-63" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-64" target="k5HLEc5P-Sjag6e1dIfe-86" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-64" value="LipOffsetChain" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="879" y="2200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-65" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-66" target="k5HLEc5P-Sjag6e1dIfe-69" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-66" value="ChainAddOffFcs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1079" y="2327" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-67" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-69" target="k5HLEc5P-Sjag6e1dIfe-71" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-68" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-69" target="k5HLEc5P-Sjag6e1dIfe-89" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-69" value="ChainAddOffLps" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1079" y="2467" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-70" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-71" target="k5HLEc5P-Sjag6e1dIfe-73" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-71" value="ChainAddOffEdgs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1079" y="2611" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-72" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-73" target="k5HLEc5P-Sjag6e1dIfe-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-73" value="SurAddOffFcs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1079" y="2887" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-74" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-76" target="k5HLEc5P-Sjag6e1dIfe-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-75" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-76" target="k5HLEc5P-Sjag6e1dIfe-93" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-76" value="SurAddOffLps" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1079" y="3027" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-77" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-78" target="k5HLEc5P-Sjag6e1dIfe-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-78" value="SurAddOffEdgs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1079" y="3167" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-79" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-81" target="k5HLEc5P-Sjag6e1dIfe-83" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-80" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-81" target="k5HLEc5P-Sjag6e1dIfe-87" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-81" value="ChainAddVtxDat" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1079" y="3307" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-82" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-83" target="k5HLEc5P-Sjag6e1dIfe-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ltPczkFoTHDm0cHYAv5y-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-83" target="ltPczkFoTHDm0cHYAv5y-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-83" value="LipSetOffGeom" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1079" y="3447" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-84" value="Add offset vertices considerable app data" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="915" y="3195" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-85" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-86" target="k5HLEc5P-Sjag6e1dIfe-66" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-86" value="ChainMarkVtxDat" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1079" y="2200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-87" value="ChainLoopAddVtxDat" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1279" y="3307" width="171" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-88" value="对offset shell中的每个loop进行分别处理，同时进行递归，递归其next和innner。正常的情况下，每个顶点添加三个VsShellVtxAppdata" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1260" y="3187" width="204" height="120" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-89" value="ChainMakeOffsetLoops" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1279" y="2467" width="126" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-90" value="这个历程添加looop和preedge信息到offset shell中，非常复杂的函数" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="898" y="2482" width="127" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-91" value="组装loop，在这个过程中有loop的创建，preedge的创建， loop与face的相互关联" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1284" y="2398" width="110" height="45" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-92" value="添加loop和preedege的信息给 oofset set" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="903" y="3039" width="154" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-93" value="SurMakeOffsetLoops" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1279" y="3027" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-94" value="观察loop上是否有属性，有属性走这个逻辑" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1199" y="2966" width="76" height="70" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-95" value="创建loop绑定上一步创建出来的face，创建preedge" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1312" y="2981" width="109" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-96" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-97" target="k5HLEc5P-Sjag6e1dIfe-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-97" value="VtxEvalOffPnts" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1279" y="3447" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-98" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-99" target="k5HLEc5P-Sjag6e1dIfe-101" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-99" value="edgeOffCkSlfx" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1279" y="3587" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-100" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-101" target="k5HLEc5P-Sjag6e1dIfe-103" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-101" value="edgeOffCkSlfx" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1279" y="3727" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-102" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-103" target="k5HLEc5P-Sjag6e1dIfe-104" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-103" value="VxtAddShellEdgs" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1279" y="3867" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-104" value="LipSetOffEdge" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1279" y="4007" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-105" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-106" target="k5HLEc5P-Sjag6e1dIfe-107" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-106" value="VxLipApply" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="479" y="2340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1c_7EhyKGoOSYIAZlhL--3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="k5HLEc5P-Sjag6e1dIfe-107" target="1c_7EhyKGoOSYIAZlhL--2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-107" value="VxBndDivide" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="679" y="2340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-108" value="这个例程会添加edge和顶点信息到lip shell中。同样的这个函数也是基于loop进行处理，对所有新增的loop进行处理" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="870" y="2626" width="163" height="54" as="geometry" />
        </mxCell>
        <mxCell id="k5HLEc5P-Sjag6e1dIfe-109" value="计算顶点坐标" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1429" y="3455" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1c_7EhyKGoOSYIAZlhL--1" value="看起来ZcTtAttrShellVertexIntData类似于属性定义，而VsShellVtxAppData 是属性实际的值。ZcTtAttrShellVertexIntData中存储了VsShellVtxAppData&amp;nbsp;的map。&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1470" y="3320" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1c_7EhyKGoOSYIAZlhL--2" value="VxBndSew" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="679" y="2480" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1c_7EhyKGoOSYIAZlhL--4" value="Add shell app data" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="915" y="3320" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1c_7EhyKGoOSYIAZlhL--5" value="进行缝合" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="600" y="2497" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1c_7EhyKGoOSYIAZlhL--8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="1c_7EhyKGoOSYIAZlhL--6" target="1c_7EhyKGoOSYIAZlhL--7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1c_7EhyKGoOSYIAZlhL--6" value="VxBndSew" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="3910" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1c_7EhyKGoOSYIAZlhL--7" value="VxVtxMergeList" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="540" y="3910" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7cqyhOHsccHK47Y4jT72-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ltPczkFoTHDm0cHYAv5y-1" target="7cqyhOHsccHK47Y4jT72-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ltPczkFoTHDm0cHYAv5y-1" value="LipCloseOffLoop" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1078" y="4150" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ltPczkFoTHDm0cHYAv5y-3" value="闭合所有offset shell中开放的loop。遍历每个shell中的face对应的loop进行处理" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="897" y="4150" width="125" height="55" as="geometry" />
        </mxCell>
        <mxCell id="ltPczkFoTHDm0cHYAv5y-4" value="添加持久的面到lip shell中" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="901.5" y="2338" width="127" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ltPczkFoTHDm0cHYAv5y-5" value="会继续创建面" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="916.5" y="2893" width="127" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7cqyhOHsccHK47Y4jT72-1" value="LipCloseOffLoop" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1278" y="4150" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7cqyhOHsccHK47Y4jT72-3" value="闭合指定的loop和相邻loop 递归处理" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1299" y="4110" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7cqyhOHsccHK47Y4jT72-4" value="&lt;div style=&quot;forced-color-adjust: none; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;算法步骤：&lt;/div&gt;&lt;div style=&quot;forced-color-adjust: none; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;入参：拓扑表，base loop index，edge chain ，一系列内容与cap相关&lt;/div&gt;&lt;div style=&quot;forced-color-adjust: none; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;1 从base loop中取出 base shell，借助base shell的appdata获取offset shell 构建 offset shell&lt;/div&gt;&lt;div style=&quot;forced-color-adjust: none; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;2通过base face 的lp与输入对比判断是否是outter loop&lt;/div&gt;&lt;div style=&quot;forced-color-adjust: none; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;3 对于一个有退化边的闭合loop，开始的preedge不应该对应一个退化边，否则程序将陷入无休止的循环（此段逻辑被版本控制）&lt;/div&gt;&lt;div style=&quot;forced-color-adjust: none; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;4对每个base loop中的preedge进行处理，判断是否在chain上，然后一定的逻辑，找是否在chain上，找不到就停止了&lt;/div&gt;&lt;div style=&quot;forced-color-adjust: none; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;5 CLOSE_CHAIN 段，这里有意思，&lt;b style=&quot;forced-color-adjust: none;&quot;&gt;这个时候preedge的创建，不一定对应的是哪个时机loop的创建&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;forced-color-adjust: none; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;6添加chain edge for裁剪边，如果没有caps，我们要加一个distnct loop因为我们需要一个inner loop 在闭合的情况，所以这个loop是不一定被创建出来的&lt;/div&gt;&lt;div style=&quot;forced-color-adjust: none; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;7&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1480" y="2387" width="560" height="210" as="geometry" />
        </mxCell>
        <mxCell id="X-PfJaCAGYXGNS0JzkO6-1" value="ChainAddOffEdgs算法步骤：输入为拓扑表，chain edges原始的loop计数，back pointer data&lt;div&gt;1 获取所有的offset loop，对每个loop进行遍历&lt;/div&gt;&lt;div&gt;2获取appdata，获取base loop，base face&lt;/div&gt;&lt;div&gt;3 对offset loop中的每个preedge进行处理，获取ofset preedg 的appdata ，拿出base preedge&lt;/div&gt;&lt;div&gt;4 base pe对应的edge是否在链上还有基于边的顶点是否能找到edge，叫做incident&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1522" y="2650" width="258" height="109" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
